# è¯¾ç¨‹æ™ºæ…§æ•™å­¦å¹³å°

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åœ¨çº¿æ•™å­¦ç®¡ç†ç³»ç»Ÿ,æ”¯æŒç®¡ç†å‘˜ã€æ•™å¸ˆã€å­¦ç”Ÿä¸‰ç§è§’è‰²,æä¾›è¯¾ç¨‹ç®¡ç†ã€ä½œä¸šç®¡ç†ã€è€ƒè¯•ç®¡ç†ã€AIåŠ©æ•™ç­‰å®Œæ•´æ•™å­¦æµç¨‹åŠŸèƒ½ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·è§’è‰²ç³»ç»Ÿ
- **ç®¡ç†å‘˜**: ç³»ç»Ÿç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€æ•°æ®ç»Ÿè®¡
- **æ•™å¸ˆ**: è¯¾ç¨‹ç®¡ç†ã€ç­çº§ç®¡ç†ã€ä½œä¸šæ‰¹æ”¹ã€è€ƒè¯•ç»„ç»‡
- **å­¦ç”Ÿ**: è¯¾ç¨‹å­¦ä¹ ã€ä½œä¸šæäº¤ã€åœ¨çº¿è€ƒè¯•ã€AIç­”ç–‘

### ä¸»è¦æ¨¡å—

#### 1. ç”¨æˆ·ç®¡ç†
- ä¸‰ç§è§’è‰²æƒé™æ§åˆ¶(admin/teacher/student)
- ä¸ªäººä¿¡æ¯ç®¡ç†
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)

#### 2. è¯¾ç¨‹ç®¡ç†
- è¯¾ç¨‹åˆ›å»º/ç¼–è¾‘/åˆ é™¤
- è¯¾ç¨‹çŠ¶æ€ç®¡ç†(è‰ç¨¿/å‘å¸ƒ/å½’æ¡£)
- è¯¾ç¨‹æœç´¢å’Œç­›é€‰
- è¯¾ç¨‹å¤§çº²ç®¡ç†

#### 3. ç­çº§ç®¡ç†
- ç­çº§åˆ›å»ºå’Œç¼–è¾‘
- å­¦ç”Ÿåå•ç®¡ç†
- ç­çº§ä¸è¯¾ç¨‹å…³è”

#### 4. ä½œä¸šç®¡ç†
- ä½œä¸šå‘å¸ƒå’Œæˆªæ­¢æ—¶é—´è®¾ç½®
- å­¦ç”Ÿä½œä¸šæäº¤(æ”¯æŒæ–‡ä»¶ä¸Šä¼ )
- æ•™å¸ˆæ‰¹æ”¹æ‰“åˆ†å’Œè¯„è¯­
- ä½œä¸šçŠ¶æ€è·Ÿè¸ª

#### 5. AIåŠ©æ•™
- æ™ºèƒ½å¯¹è¯ç­”ç–‘
- ä½œä¸šé¢˜ç›®è§£æ
- å­¦ä¹ å»ºè®®æ¨è
- ä¼šè¯å†å²è®°å½•

#### 6. é¢˜åº“ç®¡ç†
- å¤šç§é¢˜å‹æ”¯æŒ(å•é€‰/å¤šé€‰/å¡«ç©º/ç®€ç­”)
- é¢˜ç›®éš¾åº¦æ ‡è®°
- æŒ‰è¯¾ç¨‹å’Œé¢˜å‹åˆ†ç±»

#### 7. è€ƒè¯•ç®¡ç†
- åœ¨çº¿è€ƒè¯•åˆ›å»ºå’Œç»„å·
- å­¦ç”Ÿåœ¨çº¿ç­”é¢˜
- å®æ—¶è®¡æ—¶å’Œè‡ªåŠ¨ä¿å­˜
- å®¢è§‚é¢˜è‡ªåŠ¨è¯„åˆ†
- è€ƒè¯•ç»“æœç»Ÿè®¡åˆ†æ

#### 8. çŸ¥è¯†å›¾è°±
- æŒ‰ç« èŠ‚ç»„ç»‡çŸ¥è¯†ç‚¹
- çŸ¥è¯†ç‚¹ä¸æ•™å­¦å†…å®¹å…³è”
- çŸ¥è¯†ç‚¹æœç´¢å’Œå¯è§†åŒ–

#### 9. å®éªŒè¯„æµ‹
- å®éªŒåˆ›å»ºå’Œå‘å¸ƒ
- å­¦ç”Ÿä»£ç æäº¤
- åœ¨çº¿ä»£ç è¯„æµ‹
- å®éªŒæˆç»©ç®¡ç†

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 19 + TypeScript
- **æ ·å¼**: TailwindCSS 4 + shadcn/ui
- **è·¯ç”±**: Wouter
- **çŠ¶æ€ç®¡ç†**: TanStack Query (React Query)
- **APIé€šä¿¡**: tRPC 11

### åç«¯
- **è¿è¡Œæ—¶**: Node.js
- **æ¡†æ¶**: Express 4
- **API**: tRPC 11 (ç±»å‹å®‰å…¨çš„ç«¯åˆ°ç«¯API)
- **æ•°æ®åº“**: MySQL (é€šè¿‡Drizzle ORM)
- **è®¤è¯**: Manus OAuth + JWT

### AIé›†æˆ
- **LLM**: é›†æˆManuså†…ç½®LLM API
- **åŠŸèƒ½**: æ™ºèƒ½ç­”ç–‘ã€ä½œä¸šè§£æ

### æ–‡ä»¶å­˜å‚¨
- **S3**: ä½œä¸šé™„ä»¶ã€å®éªŒä»£ç ç­‰æ–‡ä»¶å­˜å‚¨

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
course-teaching-platform/
â”œâ”€â”€ client/                 # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/     # ç®¡ç†å‘˜é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ teacher/   # æ•™å¸ˆé¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ student/   # å­¦ç”Ÿé¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/    # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ lib/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ App.tsx       # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ public/           # é™æ€èµ„æº
â”œâ”€â”€ server/               # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ routers.ts       # tRPCè·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ db.ts            # æ•°æ®åº“æŸ¥è¯¢å‡½æ•°
â”‚   â”œâ”€â”€ auth.ts          # è®¤è¯ç›¸å…³å‡½æ•°
â”‚   â””â”€â”€ _core/           # æ ¸å¿ƒåŠŸèƒ½(è®¤è¯ã€LLMç­‰)
â”œâ”€â”€ drizzle/             # æ•°æ®åº“schemaå’Œè¿ç§»
â”‚   â””â”€â”€ schema.ts        # æ•°æ®è¡¨å®šä¹‰
â””â”€â”€ shared/              # å‰åç«¯å…±äº«ä»£ç 

```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 22.x
- MySQL 8.0+
- macOS/Linux/Windows

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### é…ç½®æ•°æ®åº“

1. åˆ›å»ºMySQLæ•°æ®åº“:
```sql
CREATE DATABASE teaching_platform CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. é…ç½®æ•°æ®åº“è¿æ¥(ç³»ç»Ÿå·²è‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡):
```
DATABASE_URL=mysql://user:password@localhost:3306/teaching_platform
```

3. æ¨é€æ•°æ®åº“schema:
```bash
pnpm db:push
```

4. åˆå§‹åŒ–æ¼”ç¤ºæ•°æ®(å¯é€‰):
```bash
pnpm seed
```

`pnpm seed`å‘½ä»¤ä¼šåˆ›å»ºä»¥ä¸‹æ¼”ç¤ºæ•°æ®:
- 8ä¸ªç”¨æˆ·(åŒ…æ‹¬ç®¡ç†å‘˜ã€æ•™å¸ˆã€å­¦ç”Ÿ)
- 5é—¨è¯¾ç¨‹
- 4ä¸ªç­çº§
- 5ä¸ªä½œä¸š
- 6ç§é¢˜å‹å’Œ5é“é¢˜ç›®
- 3åœºè€ƒè¯•
- 6ä¸ªç« èŠ‚å’Œ7ä¸ªçŸ¥è¯†ç‚¹
- 3ä¸ªå®éªŒ

**æ¼”ç¤ºè´¦æˆ·**:
- ç®¡ç†å‘˜: `admin` / `admin123`
- æ•™å¸ˆ: `teacher1` / `teacher123`
- å­¦ç”Ÿ: `student1` / `student123`

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

è®¿é—® http://localhost:3000

### ç”Ÿäº§æ„å»º

```bash
pnpm build
pnpm start
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

ç³»ç»ŸåŒ…å«21å¼ æ•°æ®è¡¨,ä¸»è¦åŒ…æ‹¬:

- **ç”¨æˆ·ç›¸å…³**: users, teachers, students, teacher_students
- **è¯¾ç¨‹ç›¸å…³**: courses, course_classes, classes, class_students
- **ä½œä¸šç›¸å…³**: assignments, assignment_submissions
- **è€ƒè¯•ç›¸å…³**: exams, exam_questions, exam_submissions, exam_answers
- **é¢˜åº“ç›¸å…³**: question_types, questions
- **çŸ¥è¯†å›¾è°±**: chapters, knowledge_points, assignment_knowledge_points
- **å®éªŒç›¸å…³**: experiments, experiment_submissions
- **AIåŠ©æ•™**: conversations, messages

è¯¦ç»†schemaè¯·æŸ¥çœ‹ `drizzle/schema.ts`

## ğŸ¨ ç•Œé¢è®¾è®¡

é‡‡ç”¨GitHubé£æ ¼çš„ç°ä»£åŒ–ç•Œé¢è®¾è®¡:
- ç®€æ´æ¸…çˆ½çš„è“è‰²ä¸»é¢˜
- å¡ç‰‡å¼å¸ƒå±€
- å“åº”å¼è®¾è®¡
- æµç•…çš„äº¤äº’åŠ¨ç”»

## ğŸ” è®¤è¯å’Œæƒé™

### ç™»å½•æ–¹å¼
ç³»ç»Ÿæ”¯æŒä¸¤ç§ç™»å½•æ–¹å¼:

1. **ç³»ç»Ÿç™»å½•**: ä½¿ç”¨ç”¨æˆ·å+å¯†ç ç™»å½•
   - è®¿é—® `/login` é¡µé¢
   - æ”¯æŒæ•™å¸ˆå’Œå­¦ç”Ÿæ³¨å†Œ
   - å¯†ç ä½¿ç”¨SHA-256åŠ å¯†å­˜å‚¨

2. **OAuthç™»å½•**: ä½¿ç”¨Manusè´¦æˆ·ç™»å½•
   - æ”¯æŒç¬¬ä¸‰æ–¹è´¦æˆ·å¿«é€Ÿç™»å½•
   - è‡ªåŠ¨åˆ›å»ºç”¨æˆ·èµ„æ–™

### æƒé™æ§åˆ¶

ç³»ç»Ÿå®ç°äº†å®Œæ•´çš„RBAC(åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶):

- **ç®¡ç†å‘˜(admin)**: æ‹¥æœ‰æ‰€æœ‰æƒé™,å¯ç®¡ç†ç”¨æˆ·ã€è¯¾ç¨‹ã€ç­çº§ç­‰
- **æ•™å¸ˆ(teacher)**: å¯ç®¡ç†è¯¾ç¨‹ã€ç­çº§ã€ä½œä¸šã€è€ƒè¯•ç­‰
- **å­¦ç”Ÿ(student)**: å¯æŸ¥çœ‹è¯¾ç¨‹ã€æäº¤ä½œä¸šã€å‚åŠ è€ƒè¯•ç­‰

## ğŸ“ æ•°æ®åˆå§‹åŒ–

ç³»ç»Ÿæä¾›äº†æ•°æ®åˆå§‹åŒ–è„šæœ¬(`seed-database.mjs`),å¯ä¸€é”®åˆ›å»ºæ¼”ç¤ºæ•°æ®:

```bash
pnpm seed
```

è¯¥å‘½ä»¤ä¼šåœ¨æ•°æ®åº“ä¸­åˆ›å»º:
- 8ä¸ªç”¨æˆ·(åŒ…æ‹¬ç®¡ç†å‘˜ã€æ•™å¸ˆã€å­¦ç”Ÿ)
- 5é—¨è¯¾ç¨‹
- 4ä¸ªç­çº§
- 5ä¸ªä½œä¸š
- 6ç§é¢˜å‹å’Œ5é“é¢˜ç›®
- 3åœºè€ƒè¯•
- 6ä¸ªç« èŠ‚å’Œ7ä¸ªçŸ¥è¯†ç‚¹
- 3ä¸ªå®éªŒ

æ³¨æ„:è¯¥å‘½ä»¤ä¼šæ¸…ç©ºç°æœ‰æ•°æ®,è¯·è°¨æ…ä½¿ç”¨ã€‚

## ğŸ”Œ MySQLæ•°æ®åº“æ¥å£

æ‰€æœ‰æ•°æ®åº“æ“ä½œå‡½æ•°å·²åœ¨ `server/db.ts` ä¸­å®šä¹‰,åŒ…æ‹¬:

### ç”¨æˆ·ç®¡ç†
- `getAllUsers()` - è·å–æ‰€æœ‰ç”¨æˆ·
- `updateUser(id, data)` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `getTeacherByUserId(userId)` - è·å–æ•™å¸ˆä¿¡æ¯
- `getStudentByUserId(userId)` - è·å–å­¦ç”Ÿä¿¡æ¯

### è¯¾ç¨‹ç®¡ç†
- `createCourse(data)` - åˆ›å»ºè¯¾ç¨‹
- `updateCourse(id, data)` - æ›´æ–°è¯¾ç¨‹
- `deleteCourse(id)` - åˆ é™¤è¯¾ç¨‹
- `getCourseById(id)` - è·å–è¯¾ç¨‹è¯¦æƒ…

### ç­çº§ç®¡ç†
- `createClass(data)` - åˆ›å»ºç­çº§
- `updateClass(id, data)` - æ›´æ–°ç­çº§
- `deleteClass(id)` - åˆ é™¤ç­çº§
- `getStudentsByClassId(classId)` - è·å–ç­çº§å­¦ç”Ÿ

### ä½œä¸šç®¡ç†
- `createAssignment(data)` - åˆ›å»ºä½œä¸š
- `submitAssignment(data)` - æäº¤ä½œä¸š

### é¢˜åº“ç®¡ç†
- `createQuestion(data)` - åˆ›å»ºé¢˜ç›®

### è€ƒè¯•ç®¡ç†
- `createExam(data)` - åˆ›å»ºè€ƒè¯•

### çŸ¥è¯†å›¾è°±
- `createKnowledgePoint(data)` - åˆ›å»ºçŸ¥è¯†ç‚¹

### AIåŠ©æ•™
- `createConversation(studentId)` - åˆ›å»ºå¯¹è¯
- `addMessage(conversationId, role, content)` - æ·»åŠ æ¶ˆæ¯

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•:
```bash
pnpm test
```

## ğŸ“š APIæ–‡æ¡£

ç³»ç»Ÿä½¿ç”¨tRPC,APIå®šä¹‰å³æ–‡æ¡£ã€‚æŸ¥çœ‹ `server/routers.ts` äº†è§£æ‰€æœ‰å¯ç”¨APIã€‚

ä¸»è¦APIè·¯ç”±:
- `auth.*` - è®¤è¯ç›¸å…³
- `users.*` - ç”¨æˆ·ç®¡ç†
- `courses.*` - è¯¾ç¨‹ç®¡ç†
- `classes.*` - ç­çº§ç®¡ç†
- `assignments.*` - ä½œä¸šç®¡ç†
- `questions.*` - é¢˜åº“ç®¡ç†
- `exams.*` - è€ƒè¯•ç®¡ç†
- `knowledgeGraph.*` - çŸ¥è¯†å›¾è°±
- `experiments.*` - å®éªŒç®¡ç†
- `aiAssistant.*` - AIåŠ©æ•™

## ğŸ”„ å¼€å‘æµç¨‹

1. ä¿®æ”¹æ•°æ®åº“schema: ç¼–è¾‘ `drizzle/schema.ts`
2. æ¨é€schemaå˜æ›´: `pnpm db:push`
3. æ·»åŠ æ•°æ®åº“æŸ¥è¯¢å‡½æ•°: ç¼–è¾‘ `server/db.ts`
4. æ·»åŠ APIè·¯ç”±: ç¼–è¾‘ `server/routers.ts`
5. åˆ›å»ºå‰ç«¯é¡µé¢: åœ¨ `client/src/pages/` æ·»åŠ ç»„ä»¶
6. æ›´æ–°è·¯ç”±: ç¼–è¾‘ `client/src/App.tsx`

## ğŸ¯ åç»­å¼€å‘å»ºè®®

å½“å‰ç‰ˆæœ¬å·²å®ç°æ ¸å¿ƒæ¶æ„å’Œéƒ¨åˆ†åŠŸèƒ½,å»ºè®®æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§ç»§ç»­å¼€å‘:

### å·²å®ŒæˆåŠŸèƒ½
- âœ… ä¸‰ç§è§’è‰²æƒé™ç³»ç»Ÿ(ç®¡ç†å‘˜/æ•™å¸ˆ/å­¦ç”Ÿ)
- âœ… ç³»ç»Ÿç™»å½•æ³¨å†Œ(æ•™å¸ˆæ³¨å†Œ,å­¦ç”Ÿç”±æ•™å¸ˆåˆ›å»º)
- âœ… æ•™å¸ˆæ‰¹é‡åˆ›å»ºå­¦ç”ŸåŠŸèƒ½
- âœ… è¯¾ç¨‹ç®¡ç†å®Œæ•´æµç¨‹
- âœ… ç­çº§ç®¡ç†å’Œå­¦ç”Ÿç®¡ç†
- âœ… ä½œä¸šç®¡ç†å’Œæ‰¹æ”¹
- âœ… é¢˜åº“ç®¡ç†(å¤šç§é¢˜å‹)
- âœ… è€ƒè¯•ç®¡ç†å’Œåœ¨çº¿ç­”é¢˜
- âœ… çŸ¥è¯†å›¾è°±ç®¡ç†
- âœ… å®éªŒç®¡ç†
- âœ… AIåŠ©æ•™æ™ºèƒ½ç­”ç–‘
- âœ… ä¸ªäººä¿¡æ¯å’Œå¯†ç ä¿®æ”¹

### å¯ç»§ç»­å®Œå–„
1. æ·»åŠ æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½(S3é›†æˆ)
2. å®ç°çŸ¥è¯†å›¾è°±å¯è§†åŒ–å±•ç¤º
3. å®ç°å®éªŒä»£ç åœ¨çº¿è¯„æµ‹
4. æ·»åŠ æ•°æ®ç»Ÿè®¡å›¾è¡¨
5. æ·»åŠ é€šçŸ¥ç³»ç»Ÿ
6. å®ç°å¯¼å‡ºåŠŸèƒ½(æˆç»©å•ã€æŠ¥è¡¨ç­‰)

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Request!

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä¸ºæ•™å­¦ç®¡ç†ç³»ç»Ÿæ¼”ç¤ºç‰ˆæœ¬,ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¯·è¿›è¡Œå……åˆ†çš„å®‰å…¨å®¡è®¡å’Œæ€§èƒ½æµ‹è¯•ã€‚
